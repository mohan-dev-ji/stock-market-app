{% extends 'base.html' %}



{% block page_content %}
{% if is_search %}
<div class="container">
    
    <h1>{{ stock_data['longName'] }} ({{ stock_data['symbol'] }})</h1>
    <p>Industry: {{ stock_data['industry'] }}</p>
    <p>6-month Change: {{ stock_data['52WeekChange'] }}%</p>

    <div>
        <label for="time-period">Select Time Period:</label>
        <select id="time-period" name="time-period">
            <option value="1d">1 Day</option>
            <option value="1wk">1 Week</option>
            <option value="1mo">1 Month</option>
            <option value="6mo" selected>6 Months</option>
            <option value="1y">1 Year</option>
            <option value="max">Max</option>
        </select>
    </div>

    <!-- code for displaying the graph-->
    <div>{{ graph_div|safe }}</div>
    <p>Long Business Summary: {{ stock_data['longBusinessSummary'] }}%</p>
    
    <h2>Recent News</h2>
    {% for article in news_articles %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{ article['title'] }}</h5>
            <p class="card-text">{{ article['description'] }}</p>
            <a href="{{ article['url'] }}" target="_blank" class="btn btn-primary">Read More</a>
        </div>
    </div>
    {% endfor %}
{% else %}
    <h1>{{ stock_data['longName'] }} ({{ stock_data['symbol'] }})</h1>
    <p>Industry: {{ stock_data['industry'] }}</p>
    <p>6-month Change: {{ stock_data['52WeekChange'] }}%</p>

    <div>
        <label for="time-period">Select Time Period:</label>
        <select id="time-period" name="time-period">
            <option value="1d">1 Day</option>
            <option value="1wk">1 Week</option>
            <option value="1mo">1 Month</option>
            <option value="6mo" selected>6 Months</option>
            <option value="1y">1 Year</option>
            <option value="max">Max</option>
        </select>
    </div>

    <!-- code for displaying the graph-->
    <div>{{ graph_div|safe }}</div>
    <p>Long Business Summary: {{ stock_data['longBusinessSummary'] }}%</p>
    <h2>Recent News</h2>
    {% for article in news_articles %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{ article['title'] }}</h5>
            <p class="card-text">{{ article['description'] }}</p>
            <a href="{{ article['url'] }}" target="_blank" class="btn btn-primary">Read More</a>
        </div>
    </div>
    {% endfor %}
{% endif %}
</div>

{% endblock %}